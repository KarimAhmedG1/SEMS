<template name="searchBox">
  <div class="ui left fluid icon input">
    <i class="search icon"></i>
    <input type="text" name="email" id="search-box" placeholder="Search by username or email">
  </div>
</template>

<template name="filterLabel">
  <a class="ui {{colorOfRole role}} horizontal label">
    {{role}}<div class="detail">{{countOf role}}</div>
  </a>
</template>

<template name="manageUsers">
  <!-- Header -->
  <div class="ui container grid">
    <div class="row">
      <div class="ui column">
        <h1 class="ui header text centered">Manage Users</h1>
      </div>
    </div>
    <!-- /Header -->

    <!-- Users Table -->
    <div class="row">
      <div class="ui sixteen wide column">
        <table class="ui celled padded unstackable table">
          <thead>
            <tr>
              <th colspan="2">User {{>filterLabel role= 'all' }}
                {{#each role in roles}}
                  {{> filterLabel role= role}}
                {{/each}}
              </th>
              <th>Role</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td colspan="2">
                <div class="ui column">
                  {{>searchBox}}
                </div>
              </td>
              <td class="collapsing">
                <div class="ui icon fluid button" id="update-users-button">
                  <i class="save icon"></i>Update
                </div>
              </td>
            </tr>

            {{#each users}}
              {{> userEntry}}
            {{/each}}
          </tbody>

          <!-- Update Button -->
          <tfoot>

          </tfoot>
          <!-- /Update Button -->

        </table>
      </div>
    </div>
    <!-- /Users Table -->

  </div>

</template>

<template name="userEntry">
  <tr class="{{#if modified}}modified{{/if}}">
    <td>
      <h4 class="ui header">
        <div class="content">
        <div class="ui {{colorOfRole role}} horizontal label">{{role}}</div>
          
          <a href="{{pathFor 'user.profile' _id= _id}}">{{username}}</a>
        </div>
      </h4>
    </td>

    <td class="collapsing">
      <h4 class="ui header">
        <div class="content">
          {{curruntEmail}}
        </div>
      </h4>
    </td>

    <td>
      <div class="ui selection dropdown" id= {{_id}}>
        <input type="hidden" name="role">
        <i class="dropdown icon"></i>
        <div class="default text"></div>
        <div class="menu">
          <div class="item" data-value="admin">Admin</div>
          <div class="item" data-value="lecturer">Lecturer</div>
          <div class="item" data-value="teaching-assistant">TA</div>
          <div class="item" data-value="junior-teaching-assistant">JTA</div>
          <div class="item" data-value="scrum-master">Scrum master</div>
          <div class="item" data-value="student">Student</div>
        </div>
      </div>
    </td>

  </tr>
</template>
